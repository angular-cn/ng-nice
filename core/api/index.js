/*global exports,require*/(function () {    "use strict";    var config = require("../config"),        status = require("../status"),        data = require("../data"),        uuid = require('node-uuid');    module.exports = {        user: require("./user"),        post: require("./post"),        book: {            get_list: function (req, res) {                var page = req.param("page"),                    size = req.param("size");                if (!page) {                    page = 1;                } else {                    page = parseInt(page, 10);                }                if (size) {                    size = parseInt(size, 10);                } else {                    size = 20;                }                res.setHeader("Access-Control-Allow-Origin", "*");                var books = [];                for (var i = (page - 1) * size; i < page * size; i++) {                    books.push({                        id  : i + 1,                        name: "Book Name " + i + 1                    });                }                res.setHeader("x-item-count", 1000000);                res.send(books);            },            add_list: function (req, res) {                res.setHeader("Access-Control-Allow-Origin", "*");                var body = req.body;                if (!body.books) {                    body.books = [];                }                _.each(body.books, function (book, index) {                    book.id = 1000000 + index + 1;                });                res.send(body.books);            },            add     : function (req, res) {                res.setHeader("Access-Control-Allow-Origin", "*");                var name = req.param("name");                res.send({name: name, id: 1000001});            },            update  : function (req, res) {                res.setHeader("Access-Control-Allow-Origin", "*");                var name = req.param("name"),                    bid = req.param("bid");                res.send({name: name, id: bid});            },            delete  : function (req, res) {                var bid = req.param("bid");                res.send(200);            },            upload  : function (req, res) {                res.setHeader("Access-Control-Allow-Origin", "*");                var formidable = require('formidable'),                    util = require('util');                var form = new formidable.IncomingForm();                form.maxFieldsSize = 2 * 1024 * 1024;                form.parse(req, function(err, fields, files) {                    res.status(200);                    res.json({'success': true});                });            },            check:function(req,res){                res.setHeader("Access-Control-Allow-Origin", "*");                var name = req.param("name");                if(name === "why520crazy"){                    return res.send(true);                }                return res.send(false);            }        }    }})();